{"openapi":"3.0.3","info":{"version":"1.2.33","title":"iNuvio Server Auth API","description":""},"tags":[{"name":"Autentizace","description":"Autentizační server (správa Runtime relací) je nedílnou součástí HELIOSDispatcher a zatím se nepředpokládá,\r\nže by autentizační tokeny vydával jiný server.\r\n\r\nVydaný token (**POST /api/token**) je ve stadartním formátu JWT (online dekódování například na jwt.io).\r\nJe třeba si uvědomit, že se při vydání tokenu automaticky spouští HELIOSRuntime proces, který funguje jako server funkcí jádra iNuvio.\r\nTento proces je vázán na konkrétní token a při jeho zneplatnění se automaticky zastavuje i Runtime.\r\n\r\n_POZOR, počet souběžně spouštěných Runtime procesů je omezený na 60. Pokud by mělo dojít k překročení maximálního počtu, autentizační server odmítne vydat další token._\r\n\r\nPlatnost tokenu se definuje v konfigurací Serveru - parametr **SessionTimeout**.\r\n\r\nPlatnost tokenu lze prodloužit (**GET /api/token**), nebo okamžitě ukončit (**DELETE /api/token**).\r\n\r\nDokumentace k endpointům autentizačního serveru jsou součástí každé jednotlivé dokumentace ke konkrétnímu API (pokud tedy toto API vyžaduje token autentizaci - výjimku představuje Administrativní API, kde je použita Basic autentizace, přihlašovací jméno a heslo)."}],"servers":[{"url":"/","description":""}],"paths":{"/api/token":{"get":{"tags":["Autentizace"],"summary":"Prodloužení expirace tokenu","description":"Vydá nový token s novou expirací. Runtime relace zůstane zachována.","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/tokenRefreshResult"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorResult"}}}},"400":{"description":"Invalid token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorResult"}}}}},"security":[{"authToken":[]}]},"post":{"tags":["Autentizace"],"summary":"Vytvoření nového tokenu (a Runtime relace)","description":"Funkce pro vytvoření relace / Runtime serveru. Před voláním dalších funkcí API je nutné vytvořit relaci / Runtime server a získat autentikační token který se následně používá k autentikaci volání.\r\nJednou vytvořená relace existuje až do jejího uzavření metodou DELETE token nebo do vypršení časového limitu relace / tokenu. Ten se nastavuje v administračním rozhraní serveru (Session Timeout). Platnost tokenu je možné obnovit metodou GET /token.\r\n\r\nPři vytváření relace /tokenu se spouští samostatná instance Runtime serveru jádra iNuvio. Latence této operace je řádově vteřiny (4-5 s).","requestBody":{"description":"Autentizační informace.","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/tokenBody"}}}},"responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/tokenResult"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorResult"}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorResult"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorResult"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorResult"}}}}}},"delete":{"tags":["Autentizace"],"summary":"Zneplatnění tokenu (a likvidace Runtime relace)","description":"Explicitně ukončí relaci Runtime a zneplatní autentikační token.","responses":{"204":{"description":"No content","content":{"application/json":{"schema":{"type":"string","format":"none","nullable":false}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorResult"}}}},"400":{"description":"Invalid token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorResult"}}}}},"security":[{"authToken":[]}]}},"/api/status":{"get":{"tags":["Autentizace"],"summary":"Stav autentizačního serveru","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/statusResult"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorResult"}}}}}}}},"components":{"schemas":{"errorResult":{"type":"object","nullable":false,"properties":{"errors":{"type":"object","nullable":false,"additionalProperties":{"type":"array","nullable":false,"items":{"type":"string","nullable":false}}},"type":{"type":"string","nullable":false},"title":{"type":"string","nullable":false},"status":{"type":"integer","format":"int32","nullable":false},"traceId":{"type":"string","nullable":false}}},"statusResult":{"type":"object","nullable":false,"properties":{"dispatcherVersion":{"type":"string","description":"Verze serveru (HELIOS Dispatcher).","nullable":false},"clientsCount":{"type":"integer","format":"int32","description":"Počet relací (instancí HELIOS Core).","nullable":false},"actualTime":{"type":"string","format":"date-time","description":"Aktuální čas serveru.","nullable":false}}},"tokenBody":{"type":"object","example":"{ \"username\": \"Hetogo\", \"password\": \"Hetogo@12345\", \"windowsAuthentication\": false }","nullable":false,"required":["username","password","windowsAuthentication"],"properties":{"username":{"type":"string","description":"Přihlašovací jméno. V případě doménového přihlašování je třeba použít „domena\\\\username“.","example":"Hetogo","nullable":false},"password":{"type":"string","description":"Přihlašovací heslo.","example":"Hetogo@12345","nullable":false},"windowsAuthentication":{"type":"boolean","description":"Režim ověření uživatele: false - SQL autentikace, true - NT autentikace (shodné s LoginMode=0/2 v Helios.INI)","example":false,"nullable":false},"clientId":{"type":"string","description":"Podpis klientské aplikace pro ověření licence.","example":"","nullable":false},"appRoleEnabled":{"type":"boolean","description":"Zapnutí režimu aplikační role.","example":false,"nullable":false},"appRoleDbName":{"type":"string","description":"Vyžadovaná databáze pro řežim aplikační role.","example":"HeO3_Beta","nullable":false},"eshopDbName":{"type":"string","description":"Databáze pro eShop API.","example":"HeO3_Beta","nullable":false},"notifPlatform":{"type":"string","description":"Plaforma na které klient běží.","example":"pfWindows","nullable":false,"enum":["pfWindows","pfMacOS","pfiOS","pfAndroid","pfWinRT","pfLinux"]},"notifDeviceToken":{"type":"string","description":"Unikátní identifikátor zařízení a aplikace pro účely push-notifikace.","example":"","nullable":false},"notifDeviceID":{"type":"string","description":"Unikátní identifikátor zařízení.","example":"","nullable":false},"remoteHash":{"type":"string","description":"Doplňkový parametr pro připojení k existujícímu Runtime serveru.","example":"","nullable":false},"remoteHost":{"type":"string","description":"Doplňkový parametr pro připojení k existujícímu Runtime serveru.","example":"","nullable":false},"remotePort":{"type":"string","description":"Doplňkový parametr pro připojení k existujícímu Runtime serveru.","example":"12345","nullable":false}}},"tokenResult":{"type":"object","nullable":false,"required":["versionDispatcher","versionRuntime","versionSql","license","sqlServer","idCode","licenseSystemAPI","licenseEshopAPI","licenseReceivedInvoicesAPI","licenseIssuedInvoicesAPI","token"],"properties":{"versionDispatcher":{"type":"string","description":"Verze Dispatcher.","nullable":false},"versionRuntime":{"type":"string","description":"Verze Runtime.","nullable":false},"versionSql":{"type":"string","description":"Verze MS SQL Server.","nullable":false},"license":{"type":"string","description":"Číslo licence.","nullable":false},"sqlServer":{"type":"string","description":"Použitý SQL Server.","nullable":false},"idCode":{"type":"string","description":"Identifikační kód.","nullable":false},"licenseSystemAPI":{"type":"boolean","description":"Licence pro System API.","nullable":false},"licenseEshopAPI":{"type":"boolean","description":"Licence pro eShop API.","nullable":false},"licenseReceivedInvoicesAPI":{"type":"boolean","description":"Licence pro receivedInvoices API.","nullable":false},"licenseIssuedInvoicesAPI":{"type":"boolean","description":"Licence pro issuedInvoices API.","nullable":false},"token":{"type":"string","description":"JWT pro ověřování požadavků.","nullable":false}}},"tokenRefreshResult":{"type":"object","nullable":false,"properties":{"token":{"type":"string","description":"JWT pro ověřování požadavků.","nullable":false}}}},"parameters":{},"securitySchemes":{"authToken":{"type":"http","description":"iNuvio's access token.","scheme":"bearer"}}}}